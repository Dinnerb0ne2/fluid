# 带障碍物的二维N叉树BLW流体模拟（GLFW）

一个使用格子玻尔兹曼方法（BLW模型）和GLFW进行渲染的实时二维流体模拟实现。本项目支持自定义多边形障碍物（文件导入或手动定义）、n叉树空间优化（n≥4）、颜色编码密度渲染和实时性能指标。

## 目录
- 特性
- 项目结构
- 技术细节

## 文档
- 更多项目详情请参阅[文档](/)

## 特性
- **二维BLW流体模拟**：实现D2Q9格子玻尔兹曼模型，用于稳定的流体动力学
- **N叉树优化**：空间分区（n≥4）以加速邻居查询
- **自定义障碍物**：支持多个多边形障碍物（文件导入或手动输入顶点）
- **颜色渲染**：基于密度梯度（蓝 → 绿 → 红）可视化流体运动
- **实时指标**：在用户界面中显示FPS、网格大小、粘度和障碍物数量
- **可配置边界**：为障碍物和窗口边缘设置反弹边界条件
- **跨平台兼容性**：支持Dev-C++/MinGW的构建脚本（易于适配其他编译器）

## 项目结构
```
BLW_Fluid_Simulation/
├── lib/                  # GLFW静态/导入库
│   ├── libglfw3.a
│   └── libglfw3dll.a
├── include/              # 头文件
│   ├── GLFW/             # GLFW核心头文件
│   │   ├── glfw3.h
│   │   └── glfw3native.h
|   ├── fluid.hpp
│   ├── obstacle.hpp
│   ├── nary_tree.hpp
│   └── render.chpp
|
├── src/                  # 源代码
│   ├── main.cpp          # 入口点及初始化
│   └──fluid
|       ├── fluid.cpp       # BLW流体核心逻辑
│       ├── obstacle.cpp    # 障碍物管理（多边形/文件）
│       ├── nary_tree.cpp   # N叉树空间优化
│       └── render.cpp    # GLFW渲染和用户界面
├── obstacles/            # 障碍物定义文件
│   ├── obstacle1.txt
│   ├── obstacle2.txt
│   └── obstacle3.txt
├── build.cmd             # 编译脚本
├── run.cmd               # 执行脚本
└── README.md             # 项目文档
```

## 技术细节
### 流体模拟
- **模型**：D2Q9格子玻尔兹曼方法（BLW）
- **碰撞**：BGK（Bhatnagar-Gross-Krook）碰撞模型
- **边界条件**：针对障碍物和窗口边缘的反弹边界条件
- **时间步长**：计算为`cell_size / sqrt(2.0f)`的稳定时间步长

### 空间优化
- **N叉树**：将模拟空间分割成n×n个子节点，将邻居查询复杂度从O(n²)降低到O(logₙn²)
- **阈值**：节点会被细分，直到其大小≤`cell_size * 2.0f`（可在`BLWFluid`构造函数中配置）

### 渲染
- **OpenGL**：使用立即模式（GL_QUADS）进行简单高效的渲染
- **混合**：启用混合以处理重叠的流体单元和用户界面元素
- **颜色梯度**：密度值被限制在[0.8, 1.2]范围内，并映射到RGB以实现一致的可视化

## 许可证
本项目根据Apache许可证2.0授权 - 有关详细信息，请参阅LICENSE文件：LICENSE

## 致谢
- GLFW团队提供的跨平台窗口库
- 格子玻尔兹曼方法参考文献和教程，用于流体动力学实现
- MinGW社区提供的编译器工具链支持